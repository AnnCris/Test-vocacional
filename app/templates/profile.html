{% extends 'base.html' %}

{% block title %}Mi Perfil{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-10 offset-md-1">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h2 class="mb-0">Mi Perfil Académico</h2>
            </div>
            <div class="card-body">
                <form method="post" action="{{ url_for('main.profile') }}">
                    <div class="row">
                        <div class="col-md-6">
                            <h3>Información Personal</h3>
                            <div class="mb-3">
                                <label for="first_name" class="form-label">Nombre</label>
                                <input type="text" class="form-control" id="first_name" name="first_name" value="{{ student.first_name or '' }}" required>
                            </div>
                            <div class="mb-3">
                                <label for="last_name" class="form-label">Apellido</label>
                                <input type="text" class="form-control" id="last_name" name="last_name" value="{{ student.last_name or '' }}" required>
                            </div>
                            <div class="mb-3">
                                <label for="birth_date" class="form-label">Fecha de Nacimiento</label>
                                <input type="date" class="form-control" id="birth_date" name="birth_date" value="{{ student.birth_date or '' }}">
                            </div>
                            <div class="mb-3">
                                <label for="grade" class="form-label">Curso</label>
                                <select class="form-select" id="grade" name="grade" required>
                                    <option value="">Seleccionar curso</option>
                                    <option value="4to de secundaria" {% if student.grade == "4to de secundaria" %}selected{% endif %}>4to de Secundaria</option>
                                    <option value="5to de secundaria" {% if student.grade == "5to de secundaria" %}selected{% endif %}>5to de Secundaria</option>
                                    <option value="6to de secundaria" {% if student.grade == "6to de secundaria" %}selected{% endif %}>6to de Secundaria</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="school" class="form-label">Unidad Educativa</label>
                                <input type="text" class="form-control" id="school" name="school" value="{{ student.school or '' }}">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h3>Calificaciones Académicas</h3>
                            <p class="text-muted">Registra tus calificaciones en escala de 1 a 100 puntos</p>
                            
                            <h5>Área de Matemáticas y Ciencias Exactas</h5>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="matematicas_score" class="form-label">Matemáticas</label>
                                    <input type="number" class="form-control" id="matematicas_score" name="matematicas_score" 
                                           min="1" max="100" value="{{ student.matematicas_score or '' }}">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="fisica_score" class="form-label">Física</label>
                                    <input type="number" class="form-control" id="fisica_score" name="fisica_score" 
                                           min="1" max="100" value="{{ student.fisica_score or '' }}">
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="quimica_score" class="form-label">Química</label>
                                <input type="number" class="form-control" id="quimica_score" name="quimica_score" 
                                       min="1" max="100" value="{{ student.quimica_score or '' }}">
                            </div>
                            
                            <h5>Área de Ciencias Naturales</h5>
                            <div class="mb-3">
                                <label for="biologia_score" class="form-label">Biología/Ciencias Naturales</label>
                                <input type="number" class="form-control" id="biologia_score" name="biologia_score" 
                                       min="1" max="100" value="{{ student.biologia_score or '' }}">
                            </div>
                            
                            <h5>Área de Comunicación y Lenguaje</h5>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="lenguaje_score" class="form-label">Lenguaje y Comunicación</label>
                                    <input type="number" class="form-control" id="lenguaje_score" name="lenguaje_score" 
                                           min="1" max="100" value="{{ student.lenguaje_score or '' }}">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="ingles_score" class="form-label">Inglés/Lengua Extranjera</label>
                                    <input type="number" class="form-control" id="ingles_score" name="ingles_score" 
                                           min="1" max="100" value="{{ student.ingles_score or '' }}">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h5>Área de Ciencias Sociales</h5>
                            <div class="mb-3">
                                <label for="ciencias_sociales_score" class="form-label">Ciencias Sociales</label>
                                <input type="number" class="form-control" id="ciencias_sociales_score" name="ciencias_sociales_score" 
                                       min="1" max="100" value="{{ student.ciencias_sociales_score or '' }}">
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="filosofia_score" class="form-label">Filosofía/Psicología</label>
                                    <input type="number" class="form-control" id="filosofia_score" name="filosofia_score" 
                                           min="1" max="100" value="{{ student.filosofia_score or '' }}">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="valores_score" class="form-label">Valores/Religión</label>
                                    <input type="number" class="form-control" id="valores_score" name="valores_score" 
                                           min="1" max="100" value="{{ student.valores_score or '' }}">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h5>Área Artística y Expresiva</h5>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="artes_plasticas_score" class="form-label">Artes Plásticas y Visuales</label>
                                    <input type="number" class="form-control" id="artes_plasticas_score" name="artes_plasticas_score" 
                                           min="1" max="100" value="{{ student.artes_plasticas_score or '' }}">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="educacion_musical_score" class="form-label">Educación Musical</label>
                                    <input type="number" class="form-control" id="educacion_musical_score" name="educacion_musical_score" 
                                           min="1" max="100" value="{{ student.educacion_musical_score or '' }}">
                                </div>
                            </div>
                            
                            <h5>Educación Física</h5>
                            <div class="mb-3">
                                <label for="educacion_fisica_score" class="form-label">Educación Física</label>
                                <input type="number" class="form-control" id="educacion_fisica_score" name="educacion_fisica_score" 
                                       min="1" max="100" value="{{ student.educacion_fisica_score or '' }}">
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-grid gap-2 col-6 mx-auto mt-4">
                        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Validación para calificaciones (1-100)
    const scoreInputs = document.querySelectorAll('input[type="number"]');
    
    scoreInputs.forEach(input => {
        input.addEventListener('change', function() {
            const value = parseInt(this.value);
            if (value < 1) this.value = 1;
            if (value > 100) this.value = 100;
        });
    });
});
</script>
{% endblock %}